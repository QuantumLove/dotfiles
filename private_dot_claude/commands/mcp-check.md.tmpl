---
name: mcp-check
description: Check MCP server authentication status
---

# MCP Authentication Check

Verify that all MCP servers can authenticate from current environment.

## Usage

```
/mcp-check
/mcp-check --verbose
```

## Implementation

```bash
echo "ğŸ” Checking MCP Authentication..."
echo ""

# Check required credentials
check_credential() {
    local name=$1
    local var=$2

    if [ -n "${!var}" ]; then
        # Mask the token (show first 4 and last 4 chars)
        local token="${!var}"
        local masked="${token:0:4}...${token: -4}"
        echo "âœ… $name: $masked"
    else
        echo "âŒ $name: Not set (${var})"
    fi
}

check_credential "Linear API Key" "LINEAR_API_KEY"
check_credential "GitHub Token" "GITHUB_TOKEN"

echo ""
echo "ğŸ“¡ Testing MCP Connections..."

# Test GitHub API
if [ -n "$GITHUB_TOKEN" ]; then
    if curl -s -H "Authorization: Bearer $GITHUB_TOKEN" \
            https://api.github.com/user | jq -e '.login' > /dev/null 2>&1; then
        echo "âœ… GitHub API: Connected ($(curl -s -H "Authorization: Bearer $GITHUB_TOKEN" \
            https://api.github.com/user | jq -r '.login'))"
    else
        echo "âŒ GitHub API: Authentication failed"
    fi
fi

# Check environment
echo ""
echo "ğŸ“ Environment:"
if [ -n "$CODESPACES" ]; then
    echo "   Location: GitHub Codespaces"
elif [ -n "$REMOTE_CONTAINERS" ]; then
    echo "   Location: DevContainer"
elif [ -n "$TERM_PROGRAM" ] && [ "$TERM_PROGRAM" = "WarpTerminal" ]; then
    echo "   Location: Warp (macOS host)"
else
    echo "   Location: Unknown"
fi
```

## Example Output

```
ğŸ” Checking MCP Authentication...

âœ… Linear API Key: lin_...xyz
âœ… GitHub Token: ghp_...abc

ğŸ“¡ Testing MCP Connections...
âœ… GitHub API: Connected (rafaelcarvalho)

ğŸ“ Environment:
   Location: DevContainer

âœ… All MCP servers authenticated successfully!
```
