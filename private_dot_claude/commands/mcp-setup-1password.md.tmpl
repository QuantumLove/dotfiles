---
name: mcp-setup-1password
description: Interactive setup for MCP credentials in 1Password
---

# MCP 1Password Setup

Interactive wizard to set up MCP credentials in 1Password.

## Usage

```
/mcp-setup-1password
```

## Implementation

**Step 1: Check 1Password CLI**
```bash
if ! command -v op &> /dev/null; then
    echo "âŒ 1Password CLI not installed"
    echo ""
    echo "Install with: brew install --cask 1password-cli"
    echo ""
    echo "Then enable CLI integration:"
    echo "  1. Open 1Password app"
    echo "  2. Settings â†’ Developer"
    echo "  3. Enable 'Integrate with 1Password CLI'"
    exit 1
fi

echo "âœ… 1Password CLI found: $(op --version)"
```

**Step 2: Test Authentication**
```bash
if ! op vault list &> /dev/null; then
    echo "âŒ 1Password not authenticated"
    echo ""
    echo "Please authenticate in 1Password desktop app"
    echo "Then run this command again"
    exit 1
fi

echo "âœ… 1Password authenticated"
```

**Step 3: Check/Create Development Vault**
```bash
if ! op vault get "Development" &> /dev/null 2>&1; then
    echo "ğŸ“ Creating Development vault..."
    op vault create "Development"
else
    echo "âœ… Development vault exists"
fi
```

**Step 4: Interactive Credential Input**
```bash
echo ""
echo "ğŸ” Setting up MCP credentials in 1Password"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

# Linear API Key
echo "1. Linear API Key"
echo "   Get from: https://linear.app/settings/api"
read -p "   Enter Linear API Key (or press Enter to skip): " LINEAR_KEY

if [ -n "$LINEAR_KEY" ]; then
    if op item get "Linear MCP API Key" &> /dev/null; then
        echo "   Updating existing credential..."
        op item edit "Linear MCP API Key" credential[password]="$LINEAR_KEY"
    else
        echo "   Creating new credential..."
        op item create \
          --category="API Credential" \
          --title="Linear MCP API Key" \
          --vault="Development" \
          username="linear-mcp" \
          credential[password]="$LINEAR_KEY" \
          website="https://linear.app/settings/api"
    fi
    echo "   âœ… Linear API Key stored"
fi

# GitHub Personal Access Token
echo ""
echo "2. GitHub Personal Access Token"
echo "   Get from: https://github.com/settings/tokens"
echo "   Required scopes: repo, read:org, read:user"
read -p "   Enter GitHub PAT (or press Enter to skip): " GITHUB_PAT

if [ -n "$GITHUB_PAT" ]; then
    if op item get "GitHub Personal Access Token" &> /dev/null; then
        echo "   Updating existing credential..."
        op item edit "GitHub Personal Access Token" credential[password]="$GITHUB_PAT"
    else
        echo "   Creating new credential..."
        op item create \
          --category="API Credential" \
          --title="GitHub Personal Access Token" \
          --vault="Development" \
          username="github-pat" \
          credential[password]="$GITHUB_PAT" \
          website="https://github.com/settings/tokens" \
          notes="Scopes: repo, read:org, read:user"
    fi
    echo "   âœ… GitHub PAT stored"
fi

# Context7 API Key
echo ""
echo "3. Context7 API Key"
echo "   Get from: https://context7.com/dashboard"
read -p "   Enter Context7 API Key (or press Enter to skip): " CONTEXT7_KEY

if [ -n "$CONTEXT7_KEY" ]; then
    if op item get "Context7 API Key" &> /dev/null; then
        echo "   Updating existing credential..."
        op item edit "Context7 API Key" credential[password]="$CONTEXT7_KEY"
    else
        echo "   Creating new credential..."
        op item create \
          --category="API Credential" \
          --title="Context7 API Key" \
          --vault="Development" \
          username="context7-mcp" \
          credential[password]="$CONTEXT7_KEY" \
          website="https://context7.com/dashboard"
    fi
    echo "   âœ… Context7 API Key stored"
fi

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ… MCP credentials setup complete"
echo ""
echo "Next steps:"
echo "  1. Close and reopen your terminal (to reload .zshrc)"
echo "  2. Run /mcp-check to verify credentials are loaded"
echo "  3. Start using MCP servers in Claude Code!"
```

## Example Output

```
âœ… 1Password CLI found: 2.25.0
âœ… 1Password authenticated
âœ… Development vault exists

ğŸ” Setting up MCP credentials in 1Password
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Linear API Key
   Get from: https://linear.app/settings/api
   Enter Linear API Key: lin_api_xxx
   âœ… Linear API Key stored

2. GitHub Personal Access Token
   Get from: https://github.com/settings/tokens
   Required scopes: repo, read:org, read:user
   Enter GitHub PAT: ghp_xxx
   âœ… GitHub PAT stored

3. Context7 API Key
   Get from: https://context7.com/dashboard
   Enter Context7 API Key: c7_xxx
   âœ… Context7 API Key stored

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… MCP credentials setup complete

Next steps:
  1. Close and reopen your terminal (to reload .zshrc)
  2. Run /mcp-check to verify credentials are loaded
  3. Start using MCP servers in Claude Code!
```
